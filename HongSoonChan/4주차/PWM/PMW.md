PWM

## PWM이란?

1.펄스의 폭을 컨트롤 하는 주기 제어방법이다.

2.출력되는 전압값을 일정한 비율동안의 Hihg를 유지하고, 나머지는 low를 출력하여 사각파의 출력을 만들어 낸다.

3.PWM을 이용하면 0V~5V의 아날로그 값을 묘사할 수도 있고 제어 및 통신에서 많이 사용된다.

**Prescaler(프리스케일러)**

타이머의 공급하는 입력 클럭의 속도를 조절하는 분주기이다.

*사용이유*

타이머에서 사용하는 클럭은 클럭의 주파수가 매우 높아 사용하기 너무 빠른 클럭이다. PWM Pluse를 사용하기 어렵다. 그래서 우리가 원하는 PWM을 사용하기 위해서는 출력되는 클럭을 줄여서 사용하여야한다. 이때 사용하는 것이 '프리스케일러'이다.

**Counter Period**

Counter Period를 설정하는 것은 어떠한 기준점을 설정하는 것이다.
현재의 타이머에 레지스터가 점점증가하다가 그 값이 Counter Period의 값과 같아지면 타이머의 레지스터가 0으로 초기화가 된다.

CubeMX에서 Counter Period옆에 (AutoReload Register)는 타이머의 레지스터값이 Counter Period값과 같아지면 자동으로 0으로 초기화를 시켜주는 것을 의미한다.

**Pulse**

Pulse는 PWM에서 얼만큼의 클럭을 방출할 것인가를 나타내는 것이다. 



## **Prescaler, Counter Period를 이용하여 PWM의 주기와 주파수를 구하는 과정

**

**주기 공식**

PWM Pulse 주파수 = 클럭주파수 / prescaler /Counter Period 이다

기존의 클럭 주파수가 16MHz이고 이것을 16prescaler로 나눈 값을  1000으로 나누면 1KHz가 나온다.

**주파수 공식**

주파수 = 1/주기
주파수를 통해 주기를 구할 수도 있다.
PWM Pulse의 주파수는 1KHz였으므로 1/1000초가 주기이다. 즉 1ms이다.






